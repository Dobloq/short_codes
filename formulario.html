<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--<script type="text/javascript" src="blanco.js"></script>-->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Pruebas</title>
</head>
<body id="cuerpo">
<form id="form" onsubmit="reset()">

<fieldset id="datosp">
<label for="nombre">Nombre </label>
<input id="nombre" type="text" onblur="this.style.backgroundColor = 'white'" tabindex="1"/>
<label for="apellidos">Apellidos </label>
<input id="apellidos" type="text" onblur="this.style.backgroundColor = 'white'" tabindex="2"/>
</fieldset>

<br />
<fieldset id="dnil">
<label for="dni">DNI </label>
<input id="dni" type="number" maxlength="8" onblur="this.style.backgroundColor = 'white'" tabindex="3" />
<label for="dniletra">Letra </label>
<input id="dniletra" type="text" maxlength="1" onblur="dni()" tabindex="4" />
</fieldset>

<br />
<fieldset id="correoo">
<label for="email">Correo </label>
<input id="email" type="email" onblur="correo()" tabindex="5" />
</fieldset>

<br />
<fieldset id="fechaa">
<label for="fecha">Fecha de nacimiento </label>
<input id="fecha" type="date" onblur="fecha()" tabindex="6" />
</fieldset>

<br />
<label for="sex">Sexo </label>
<fieldset id="sex">
<label for="hombre">Hombre </label>
<input id="hombre" type="radio" name="sexo" tabindex="7" />
<label for="mujer">Mujer </label>
<input id="mujer" type="radio" name="sexo" tabindex="8" />
</fieldset>

<br />
<fieldset id="contra">
<label for="nick">Nick </label>
<input id="nick" type="text" onblur="this.style.backgroundColor = 'white'" tabindex="9" />
<br />
<label for="pass1">Contraseña </label>
<input id="pass1" type="password" onblur="this.style.backgroundColor = 'white'" tabindex="10" />
<label for="pass2">Repita la contraseña </label>
<input id="pass2" type="password" onblur="checkpass()" tabindex="11" />
</fieldset>

<br />
<label for="hoby">Aficiones </label>
<fieldset id="hoby" onmouseout="this.style.backgroundColor = 'white'">
<label for="ciencias">Ciencias </label>
<input id="ciencias" type="checkbox" name="hoby" value="Ciencias" tabindex="12" />
<label for="tecno">Tecnología </label>
<input id="tecno" type="checkbox" name="hoby" value="Tecnología" tabindex="13" />
<label for="poli">Política </label>
<input id="poli" type="checkbox" name="hoby" value="Política" tabindex="14" />
<label for="sport">Deportes </label>
<input id="sport" type="checkbox" name="hoby" value="Deportes" tabindex="15" />
<label for="cine">Cine </label>
<input id="cine" type="checkbox" name="hoby" value="Cine" tabindex="16" />
</fieldset>

<br />
<label for="banco">Número de cuenta bancaria </label>
<fieldset id="banco">
<input id="banco1" type="number" maxlenght="4" onblur="this.style.backgroundColor = 'white'" tabindex="17" />
<input id="banco2" type="number" maxlength="4" onblur="this.style.backgroundColor = 'white'" tabindex="18" />
<input id="banco3" type="number" maxlength="2" onblur="this.style.backgroundColor = 'white'" tabindex="19" />
<input id="banco4" type="number" maxlength="10" onblur="this.style.backgroundColor = 'white'" tabindex="20" />
</fieldset>

<br />
<fieldset id="acep">
<label for="aceptar">Acepto las condiciones de uso </label>
<input id="aceptar" type="checkbox" required="required" tabindex="21" />
</fieldset>

<br />
<input id="enviar" type="button" onclick="check()" value="Enviar" />
</form>

<script>
var errores = "";
function dni(){
		var dni = document.getElementById('dni').value;
		var letra = document.getElementById('dniletra').value;
		letra=letra.toUpperCase();
		var letras=new Array;
		letras = ['T', 'R', 'W', 'A', 'G', 'M', 'Y', 'F', 'P', 'D', 'X', 'B', 'N', 'J', 'Z', 'S', 'Q', 'V', 'H', 'L', 'C', 'K', 'E'];
		while ((dni<0)||(dni>99999999)){
			alert('El numero no es correcto');//en cas d'error
		}
		var numero=0;
		numero = dni % 23;
		var correcta = letras[numero];
		if (letra != correcta){
			alert ('La letra es incorrecta')
			}
	}
	
function fecha(){
		var date = document.getElementById("fecha").value;
		var fecha = [];
		fecha = date.split("-");
		var dia = fecha[2];
		var mes = fecha [1];
		var año = fecha [0];
		var fecha2 = new Date()
		fecha2 = fecha2.setFullYear(año,mes,dia);
		var actual = new Date();
		var day = actual.getDate();
		var month = (actual.getMonth()+1);
		var year = actual.getFullYear();
		if((año<1900)||(año>actual)||(mes<1)||(mes>12)||(dia>31)||(dia<1)||(date=="")){
				alert("Escribe una fecha de nacimiento valida");
		   } else {
			   var hoy = new Date();
				var ed = parseInt((hoy - fecha2)/31536000000)
				if (ed < 18) {alert("Eres menor de edad")} else {
			   alert ("Fecha correcta")}}
	}
	
function correo(){
	var email = document.getElementById("email");
	var correo = email.value;
	if ( correo.indexOf("@") != -1){
		if (correo.indexOf(".") != -1) {
			if (correo.indexOf("com") != -1 || correo.indexOf("es") != -1) {
				alert("El correo es correcto")
				} else {alert("El correo esta mal escrito, compruébelo")}
			} else {alert("El correo esta mal escrito, compruébelo")}
		} else {alert("El correo esta mal escrito, compruébelo")}
	}
	
function checkpass(){
	var pass1 = document.getElementById("pass1").value;
	var pass2 = document.getElementById("pass2").value;
	if (pass1 != pass2) { alert("Las contraseñas no coinciden")}
	}
	
function check(){
	
	//contraseña
	var nick = document.getElementById("nick").value;
	if (nick == "") {
		document.getElementById("contra").innerHTML = "<p>Debe insertar un nick</p>";
		document.getElementById("nick").style.backgroundColor = "red";
		errores += ",nick";
		}
	var pass1 = document.getElementById("pass1").value;
	var pass2 = document.getElementById("pass2").value;
	if (pass1 == "" || pass2 == "") {document.getElementById("contra").innerHTML = "<p>Debe rellenar los campos de contraseñas</p>";
	document.getElementById("pass1").style.backgroundColor = "red";
	document.getElementById("pass2").style.backgroundColor = "red";
	errores += ",contraseña";
	}
	
	//sexo
	if (document.forms.form.sexo[0].checked != true && document.forms.form.sexo[1].checked != true) {
		document.getElementById("sex").innerHTML = "<p>Debes marcar al menos una opcion</p>";
		document.getElementById("hombre").style.backgroundColor = "red";
		document.getElementById("mujer").style.backgroundColor = "red";ç
		errores += ",sexo";
		}
		
	//aficiones
	var hobis = 0;
	if (document.forms.form.hoby[0].checked == true){ hobis++;}
	if (document.forms.form.hoby[1].checked == true){ hobis++;}
	if (document.forms.form.hoby[2].checked == true){ hobis++;}
	if (document.forms.form.hoby[3].checked == true){ hobis++;}
	if (document.forms.form.hoby[4].checked == true){ hobis++;}
	if (hobis < 2){ 
		document.getElementById("hoby").innerHTML = "<p>Debes marcar al menos dos opciones</p>"; 
		document.getElementById("hoby").focus();
		document.getElementById("hoby").style.backgroundColor = "red";
		errores += ",aficiones";
		}
	
	//nombre
	var nombre = document.getElementById("nombre").value;
	if (nombre == "") {
		document.getElementById("datosp").innerHTML = "<p>Tienes que rellenar el campo 'Nombre'</p>";
		document.getElementById("datosp").style.backgroundColor = "red";
		errores += ",nombre";
		}
	
	//apellidos
	var apellidos = document.getElementById("apellidos").value;
	if (apellidos == ""){
		document.getElementById("datosp").innerHTML = "<p>Tienes que rellenar el campo 'Apellidos'</p>";
		document.getElementById("datosp").focus();
		document.getElementById("datosp").style.backgroundColor = "red";
		errores += ",apellidos";
		}
		
	//dni
	var dni = document.getElementById("dni");
	var dniletra = document.getElementById("dniletra");
	if (dni.value == "" || dniletra.value ==""){
		document.getElementById("dnil").innerHTML = "<p>Tienes que rellenar los campos 'DNI' y 'Letra'</p>";
		document.getElementById("dni").style.backgroundColor = "red";
		document.getElementById("dniletra").style.backgroundColor = "red";
		errores += ",dni";
		}	
	
	//fecha
	var fecha = document.getElementById("fecha").value;
	if (fecha == "") {
		document.getElementById("fechaa").innerHTML = "<p>Tienes que rellenar el campo 'Fecha de nacimiento'</p>";
		document.getElementById("fecha").style.backgroundColor = "red";
		errores += ",fecha";
		}
	
	//correo
	var correo = document.getElementById("email").value;
	if (correo == "") {
		document.getElementById("correoo").innetHTML = "<p>Tienes que rellenar el campo 'Correo'</p>";
		document.getElementById("email").style.backgroundColor = "red";
		errores += ",correo";	
	}
	
	//cuenta
	var cuenta = document.getElementById("banco1").value;
	cuenta += "," + document.getElementById("banco2").value;
	cuenta += "," + document.getElementById("banco3").value;
	cuenta += "," + document.getElementById("banco4").value;
	if (cuenta == ",,,") {
		document.getElementById("banco").innerHTML = "<p>Tienes que rellenar los 4 campos de 'Cuenta bancaria'</p>";
		document.getElementById("banco1").style.backgroundColor = "red";
		document.getElementById("banco2").style.backgroundColor = "red";
		document.getElementById("banco3").style.backgroundColor = "red";
		document.getElementById("banco4").style.backgroundColor = "red";
		errores += ",cuenta";
	}
	
	//aceptar
	var aceptar = document.getElementById("aceptar").checked;
	if (aceptar == false) {
		document.getElementById("acep").innerHTML = "<p>Tiene que aceptar las condiciones de uso</p>";
		errores += ",aceptar"
		}
		
	if(errores == "") {document.getElementById("form").submit(); }	
	// mensajes globales de error
	else {
		if (errores.indexOf("nick") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Debe insertar un nick</p>";}
		if (errores.indexOf("contraseña") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Debe rellenar los campos de contraseñas</p>";}
		if (errores.indexOf("sexo") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Debes marcar al menos una opcion</p>";}
		if (errores.indexOf("aficiones") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Debes marcar al menos dos opciones</p>";} 
		if (errores.indexOf("nombre") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tienes que rellenar el campo 'Nombre'</p>";}
		if (errores.indexOf("apellidos") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tienes que rellenar el campo 'Apellidos'</p>";}
		if (errores.indexOf("dni") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tienes que rellenar los campos 'DNI' y 'Letra'</p>";}
		if (errores.indexOf("fecha") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tienes que rellenar el campo 'Fecha de nacimiento'</p>";}
		if (errores.indexOf("correo") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tienes que rellenar el campo 'Correo'</p>";}
		if (errores.indexOf("cuenta") != -1){document.getElementById("cuerpo").innerHTML= "<p>Tienes que rellenar los 4 campos de 'Cuenta bancaria'</p>";}
		if (errores.indexOf("aceptar") != -1 ){document.getElementById("cuerpo").innerHTML = "<p>Tiene que aceptar las condiciones de uso</p>";}
		}
}
</script>
</body>
</html>